<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><link rel="stylesheet" href="/css/avatar.css"><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/images/favicon.ico"><link rel="icon" href="/images/favicon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#336839"><meta name="author" content="mobeicanyue"><meta name="keywords" content="漠北残月, 博客, mobeicanyue, technology, daily, share"><meta name="description" content="本文将会介绍如何部署一台新的云服务器。如果你只是想要部署一个简单的网站，阅读前 3 节即可，4～7 节内容是关于服务器的安全配置。第 8 节有一键脚本，可以帮助你快速部署服务器。我自己部署了不少服务器，现在有了一定的经验，写下本文来记录一下自己在部署服务器时的一些操作及注意事项来备忘。我曾经也是一个新手，在部署服务器的时候遇到很多问题，不管屏幕前的你是出于何种目的：比如有"><meta property="og:type" content="article"><meta property="og:title" content="从零开始部署服务器和网站"><meta property="og:url" content="https://blog.ovvv.top/posts/4cde56ee/"><meta property="og:site_name" content="漠北残月的博客"><meta property="og:description" content="本文将会介绍如何部署一台新的云服务器。如果你只是想要部署一个简单的网站，阅读前 3 节即可，4～7 节内容是关于服务器的安全配置。第 8 节有一键脚本，可以帮助你快速部署服务器。我自己部署了不少服务器，现在有了一定的经验，写下本文来记录一下自己在部署服务器时的一些操作及注意事项来备忘。我曾经也是一个新手，在部署服务器的时候遇到很多问题，不管屏幕前的你是出于何种目的：比如有"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://pic4.zhimg.com/80/v2-7c0b3970795ca4710d6ed4c50a3e5383_1440w.webp"><meta property="og:image" content="https://pic1.zhimg.com/80/v2-451ed34fbe3762fc35d33d51a5bef524_1440w.webp"><meta property="og:image" content="https://pic2.zhimg.com/80/v2-361795da46a8bea1a7a279ec2bcd2729_1440w.webp"><meta property="og:image" content="https://pic2.zhimg.com/80/v2-bbecd6cb7f4141ad2a583dc2430843dd_1440w.webp"><meta property="og:image" content="https://pic2.zhimg.com/80/v2-8e97a3e00c822f160241ba31cc8f8579_1440w.webp"><meta property="article:published_time" content="2024-03-01T14:25:20.000Z"><meta property="article:modified_time" content="2024-05-20T08:47:58.000Z"><meta property="article:author" content="mobeicanyue"><meta property="article:tag" content="运维"><meta property="article:tag" content="服务器"><meta property="article:tag" content="部署"><meta property="article:tag" content="Fail2ban"><meta property="article:tag" content="安全"><meta property="article:tag" content="Linux"><meta property="article:tag" content="SSH"><meta property="article:tag" content="ufw"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://pic4.zhimg.com/80/v2-7c0b3970795ca4710d6ed4c50a3e5383_1440w.webp"><script async>let dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;if(useDnt=dnt&&(dnt.startsWith("1")||dnt.startsWith("yes")||dnt.startsWith("on")),!useDnt){let t=document.createElement("script");t.async=!0,t.src="https://umami.ovvv.top/script.js",t.setAttribute("data-website-id","72f672c5-4ac9-4bbf-be13-2ba876d8cb93"),t.setAttribute("data-domains","blog.ovvv.top"),t.setAttribute("data-do-not-track","true"),document.head.appendChild(t)}</script><title>从零开始部署服务器和网站 - 漠北残月的博客</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-web/style.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"blog.ovvv.top",root:"/",version:"1.9.7",typing:{enable:!1,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="漠北残月的博客" type="application/atom+xml"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>漠北残月的博客</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/atom.xml" target="_self"><i class="iconfont icon-rss"></i> <span>RSS</span></a></li><li class="nav-item"><a class="nav-link" href="#" target="_self"><i class="iconfont icon-code"></i> <span>随机</span></a></li><li class="nav-item"><a class="nav-link" href="/posts/fcd36967" target="_self"><i class="iconfont icon-pen"></i> <span>笔记</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url('https://www.yuanxiapi.cn/api/bing/') no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">从零开始部署服务器和网站</span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> mobeicanyue </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2024-03-01 22:25" pubdate>2024年3月1日</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 4.5k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 46 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">从零开始部署服务器和网站</h1><p id="updated-time" class="note note-info">本文最后更新于 2024年5月20日 16:47</p><div class="markdown-body"><div class="note note-secondary"><p>本文将会介绍如何部署一台新的云服务器。如果你只是想要部署一个简单的网站，阅读前 3 节即可，4～7 节内容是关于服务器的安全配置。<strong>第 8 节有一键脚本，可以帮助你快速部署服务器。</strong></p><p>我自己部署了不少服务器，现在有了一定的经验，写下本文来记录一下自己在部署服务器时的一些操作及注意事项来备忘。我曾经也是一个新手，在部署服务器的时候遇到很多问题，不管屏幕前的你是出于何种目的：比如有业务搭建的需要；还是初入运维的小白；或者只是单纯的想折腾。我希望这篇文章大部分人看完后都能有所收获。</p></div><h2 id="0-基础的-Web-知识"><a href="#0-基础的-Web-知识" class="headerlink" title="0. 基础的 Web 知识"></a>0. 基础的 Web 知识</h2><p>在开始之前，我们得先了解一些基础的 Web 知识。有了这些知识，我们才能更好地理解服务器的操作及其使用。如果你已经了解了这些知识，可以直接跳到下一节。</p><h3 id="0-1-什么是服务器？"><a href="#0-1-什么是服务器？" class="headerlink" title="0.1 什么是服务器？"></a>0.1 什么是服务器？</h3><p>在开始使用之前，我们得先搞懂什么是服务器。</p><p><strong>服务器是一种专门为网络服务而设计的专用计算机，其主要功能是为用户提供计算或应用服务。</strong>如网站、数据库、电子邮件、文件存储等等。</p><p>而服务器分为 <code>独立服务器</code> 和 <code>虚拟服务器</code>，它们是有区别的。</p><ul><li><p><code>独立服务器</code> 是指一台物理服务器只提供给一个用户使用，核数多、性能高、稳定性好。但是 <code>价格往往相当昂贵</code>，适合大企业使用，如果我们只是搭建一个小型网站就相当不划算。</p></li><li><p><code>虚拟服务器</code> 是指一台物理服务器上划分出多个虚拟服务器，每个虚拟服务器都有自己的操作系统、磁盘、内存、CPU 等资源，但是它们共享物理服务器的资源。但是 <code>价格也相对便宜</code>，适合个人或小型企业使用。</p></li></ul><p>本文所说的服务器就是指 <code>虚拟服务器</code>，也就是我们常说的云服务器、云主机，属于 IaaS（基础设施即服务）。我们如果要部署一个网站，就需要一个云服务器。</p><p>而云服务器提供商有很多，比如阿里云、腾讯云、华为云、亚马逊云等等。</p><p><img src="https://pic4.zhimg.com/80/v2-7c0b3970795ca4710d6ed4c50a3e5383_1440w.webp" srcset="/img/loading.gif" lazyload alt="阿里云的 ECS 简介"></p><p>而其价格根据配置、地区、带宽等也有所不同，我们可以根据自己的需求来选择。</p><p><img src="https://pic1.zhimg.com/80/v2-451ed34fbe3762fc35d33d51a5bef524_1440w.webp" srcset="/img/loading.gif" lazyload alt="腾讯轻量云活动"></p><p>需要特别注意的是，如果你购买的服务器在中国内地（大陆），必须完成 ICP 备案才可对外提供服务。备案是什么以及如何备案，就不在本文讨论范围内了。</p><h3 id="0-2-如何选择服务器系统？"><a href="#0-2-如何选择服务器系统？" class="headerlink" title="0.2 如何选择服务器系统？"></a>0.2 如何选择服务器系统？</h3><p>可选的服务器系统，主要有 <code>Windows</code> 和 <code>Linux</code> 两种。</p><p>我们一般选择 Linux 作为服务器系统，因为 Linux 有很多优点，比如稳定、安全、开源、免费等等，最重要的是高度可自定义，不会给你塞一些不想要的牛皮癣功能。</p><p>而在 Linux 中，又有很多发行版，比如 Ubuntu、CentOS（近几年争议较多 不建议选择）、Debian、Fedora 等等。本文选择 <strong><code>Debian</code></strong> 作为演示，它是是最受欢迎的 Linux 发行版之一 Ubuntu 的上游，是一个非常稳定和可靠的操作系统，也通常被认为比 Ubuntu 更轻量级，因为它不包含太多附加的软件。</p><p>一般服务器提供商都会提供多种系统，你可以根据自己的需求来选择。</p><h3 id="0-3-什么是域名及-DNS？"><a href="#0-3-什么是域名及-DNS？" class="headerlink" title="0.3 什么是域名及 DNS？"></a>0.3 什么是域名及 DNS？</h3><p>购买了一台服务器之后，服务器供应商 会提供给我们服务器的 IP 地址如 <code>8.8.8.8</code>，我们可以通过这个 IP 地址来访问我们的服务器。</p><p>但是 IP 地址是一串数字，不方便记忆，并且后期如果更换服务器，IP 地址也会随之变化，这就会导致我们的网站无法访问。所以我们需要一个域名替代 IP 地址来访问我们的服务器，让用户更方便地访问我们的网站。</p><p>域名就是我们常说的网址，比如 <code>qq.com</code>、<code>baidu.com</code>、<code>google.com</code> 等等。</p><blockquote><p>域名是由一串用点分隔的字符组成的互联网上某一台计算机或计算机组的名称，用于在数据传输时标识计算机的电子方位。域名可以说是一个 IP 地址的代称，目的是为了便于记忆后者。—— wikipedia</p></blockquote><p>而 DNS（Domain Name System）是一个分布式数据库，用于存储域名和 IP 地址之间的映射关系。当我们在浏览器中输入一个域名时，浏览器会向 DNS 服务器查询域名对应的 IP 地址，然后再通过这个 IP 地址来访问服务器。</p><p><img src="https://pic2.zhimg.com/80/v2-361795da46a8bea1a7a279ec2bcd2729_1440w.webp" srcset="/img/loading.gif" lazyload alt="DNS 查询过程"></p><p><strong>将我们的域名解析到服务器的 IP 地址，就可以通过域名来访问我们的服务器了。</strong>域名注册商一般都会提供 DNS 服务，我们可以在域名注册商的控制台中进行域名解析。</p><p><img src="https://pic2.zhimg.com/80/v2-bbecd6cb7f4141ad2a583dc2430843dd_1440w.webp" srcset="/img/loading.gif" lazyload alt="域名解析"></p><p>你可以选择国内外的知名域名注册商，比如阿里云、腾讯云、GoDaddy、Namecheap、Dynadot 等等。不推荐使用白嫖的域名 —— 因为你的域名所有权得不到保障。</p><h2 id="1-连接服务器"><a href="#1-连接服务器" class="headerlink" title="1. 连接服务器"></a>1. 连接服务器</h2><p>现在假设你已经在服务器提供商那里购买了一台服务器，那么它会给你提供服务器的 <code>IP 地址</code> 以及 <code>root 用户密码</code>。接下来我们开始连接服务器。</p><h3 id="1-1-使用-SSH-连接服务器"><a href="#1-1-使用-SSH-连接服务器" class="headerlink" title="1.1 使用 SSH 连接服务器"></a>1.1 使用 SSH 连接服务器</h3><blockquote><p>SSH（Secure Shell）是一种加密的网络传输协议，可在不安全的网络中为网络服务提供安全的传输环境。Win10&#x2F;11 和 Linux 发行版，应该都有预装 openssh，如果没有可以搜一下安装教程</p></blockquote><p>我们可以使用 SSH 客户端连接服务器，然后在服务器上执行命令。打开系统的命令行终端，输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh root@&lt;服务器 IP 地址&gt;<br></code></pre></td></tr></table></figure><p>如果能连接到服务器，会输出以下信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh root@x.x.x.x<br>The authenticity of host <span class="hljs-string">&#x27;x.x.x.x (x.x.x.x)&#x27;</span> can<span class="hljs-string">&#x27;t be established.</span><br><span class="hljs-string">ED25519 key fingerprint is SHA256:xxxxxxxxxxxxxxxxxxxxxxxxxxx.</span><br><span class="hljs-string">This key is not known by any other names.</span><br><span class="hljs-string">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span><br><span class="hljs-string">Warning: Permanently added &#x27;</span>x.x.x.x<span class="hljs-string">&#x27; (ED25519) to the list of known hosts.</span><br><span class="hljs-string">root@x.x.x.x&#x27;</span>s password:<br></code></pre></td></tr></table></figure><p>这段输出的意思是，无法验证服务器的真实性，是否继续连接。<br>输入 <code>yes</code> 然后 <code>输入服务器的密码</code> 即可连接到服务器。<strong>这段真实性验证只会出现一次，以后再连接服务器就不会再出现了。</strong></p><p>需要注意的是，<strong>输入 SSH 密码时，屏幕上不会显示密码</strong>，不用担心，将服务器的密码正确粘贴后回车即可。</p><p>现在你已经连接到服务器了，可以在服务器上执行命令了。如果连接过程出现报错，请按照报错信息进行排查。</p><h2 id="2-设置服务器时区"><a href="#2-设置服务器时区" class="headerlink" title="2. 设置服务器时区"></a>2. 设置服务器时区</h2><p>设置服务器的时区是非常重要的，因为服务器的时间会影响到很多服务的正常运行。比如日志记录、定时任务、证书有效期、数据库时间等等。</p><h3 id="2-1-查看当前时区"><a href="#2-1-查看当前时区" class="headerlink" title="2.1 查看当前时区"></a>2.1 查看当前时区</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">timedatectl<br></code></pre></td></tr></table></figure><p>你的输出有可能为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">               Local time: Tue 2024-03-05 05:39:46 UTC<br>           Universal time: Tue 2024-03-05 05:39:46 UTC<br>                 RTC time: Tue 2024-03-05 05:39:50<br>                Time zone: UTC (UTC, +0000)<br>System clock synchronized: no<br>              NTP service: active<br>          RTC <span class="hljs-keyword">in</span> <span class="hljs-built_in">local</span> TZ: no<br></code></pre></td></tr></table></figure><p>这代表你的服务器的时区是 UTC 时间，而 UTC 时间是世界标准时间，也就是 0 时区。而 <code>System clock synchronized: no</code> 代表你的系统时钟同步没有开启。</p><h3 id="2-2-设置服务器时区"><a href="#2-2-设置服务器时区" class="headerlink" title="2.2 设置服务器时区"></a>2.2 设置服务器时区</h3><p>根据你的服务器所在地区设置时区，输入以下命令来查看可用的时区：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo timedatectl list-timezones<br></code></pre></td></tr></table></figure><p>比如我的服务器在香港，那么我就设置为 <code>Asia/Hong_Kong</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo timedatectl set-timezone Asia/Hong_Kong<br></code></pre></td></tr></table></figure><p>然后再次查看时区：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">timedatectl<br></code></pre></td></tr></table></figure><p>如果显示为 <code>Time zone: Asia/Hong_Kong</code>，那么就说明时区设置成功了。</p><h3 id="2-3-系统时钟同步"><a href="#2-3-系统时钟同步" class="headerlink" title="2.3 系统时钟同步"></a>2.3 系统时钟同步</h3><p>网络时间协议 NTP（Network Time Protocol）是一种用于同步系统时钟的协议，提供高精准度的时间校正，保证服务器的时间准确。</p><blockquote><p>根据操作系统版本的不同，Debian 提供了多种安装 NTP 客户端的软件包。自 Debian 12 起，默认的 NTP 客户端是 systemd 的 systemd-timesyncd<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://wiki.debian.org/DateTime">[2]</span></a></sup>。timesyncd 是轻量级 ntpd 的替代品，配置更简单、更高效、更安全。此外，Timesyncd 还能更好地与 systemd 集成。这一特性使得使用 systemd 命令进行管理变得更容易<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://phoenixnap.com/kb/debian-time-sync">[3]</span></a></sup>。</p></blockquote><div class="fold"><div class="fold-title fold-info collapsed" data-toggle="collapse" href="#collapse-7d63aed6" role="button" aria-expanded="false" aria-controls="collapse-7d63aed6"><div class="fold-arrow">▶</div>Debian 12</div><div class="fold-collapse collapse" id="collapse-7d63aed6"><div class="fold-content"><p>如果你是 Debian 12，那么你可以使用 <code>systemd-timesyncd</code> 来同步服务器时间。<br>输入以下命令来安装 <code>systemd-timesyncd</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install systemd-timesyncd -y<br></code></pre></td></tr></table></figure><p>查看 <code>systemd-timesyncd</code> 的状态：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemctl status systemd-timesyncd<br></code></pre></td></tr></table></figure><p>如果 <code>systemd-timesyncd</code> 是 <code>active (running)</code> 状态，那么就说明 <code>systemd-timesyncd</code> 已经在运行了。否则，你需要手动启动 <code>systemd-timesyncd</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemctl start systemd-timesyncd<br></code></pre></td></tr></table></figure><p>这时你的服务器的时间就会自动同步了。</p></div></div></div><div class="fold"><div class="fold-title fold-info collapsed" data-toggle="collapse" href="#collapse-dd575e1a" role="button" aria-expanded="false" aria-controls="collapse-dd575e1a"><div class="fold-arrow">▶</div>Debian 11 及更早版本</div><div class="fold-collapse collapse" id="collapse-dd575e1a"><div class="fold-content"><p>如果你是 Debian 11 或更早的版本，那么你可以使用 <code>ntp</code> 来同步服务器时间。</p><p>输入以下命令来安装 <code>ntp</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install ntp -y<br></code></pre></td></tr></table></figure><p>查看 <code>ntp</code> 的状态：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemctl status ntp<br></code></pre></td></tr></table></figure><p>如果 <code>ntp</code> 是 <code>active (running)</code> 状态，那么就说明 <code>ntp</code> 已经在运行了。否则，你需要手动启动 <code>ntp</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemctl start ntp<br></code></pre></td></tr></table></figure><p>这时你的服务器的时间就会自动同步了。</p></div></div></div><p>再次查看时区：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">timedatectl<br></code></pre></td></tr></table></figure><p>如果显示为 <code>System clock synchronized: yes</code>，那么就说明系统时钟同步成功了。</p><h2 id="3-安装-Web-服务器"><a href="#3-安装-Web-服务器" class="headerlink" title="3. 安装 Web 服务器"></a>3. 安装 Web 服务器</h2><p><code>Nginx</code> 与 <code>Caddy</code> 是两个优秀的 Web 服务器，它们都是开源的免费的，功能强大，而且易于配置。我们可以选择其中一个来作为我们的 Web 服务器。</p><p>其中 <code>Nginx</code> 是市场占有量最高的 Web 服务器，没有之一。如果你是运维或者开发人员，那么我相信你多多少少一定会接触到 Nginx 的相关操作，建议还是学习一下相关的知识。</p><p>但如果你是小白或者想寻找<code>Nginx</code>的替代品，那么可以尝试一下 <code>Caddy</code>。<code>Caddy</code> 提供了简单易用的配置和自动提供 HTTPS 等功能，使得搭建和管理网站变得更加轻松。</p><h3 id="3-1-Nginx-安装与使用"><a href="#3-1-Nginx-安装与使用" class="headerlink" title="3.1 Nginx 安装与使用"></a>3.1 Nginx 安装与使用</h3><p>可以参考我的文章：<a href="/posts/6645bed3/" title="Nginx 安装与使用教程">Nginx 安装与使用教程</a><br>里面涉及 Nginx 的安装、配置、虚拟主机配置、反向代理配置等等。建议花时间阅读一下，对你的服务器操作和理解会有帮助。</p><h3 id="3-2-Caddy-安装与使用"><a href="#3-2-Caddy-安装与使用" class="headerlink" title="3.2 Caddy 安装与使用"></a>3.2 Caddy 安装与使用</h3><p>可以参考我的文章：<a href="/posts/f3ac7ef6/" title="Caddy 安装与使用教程">Caddy 安装与使用教程</a><br>现代化的 Web 服务器，具有自动 HTTPS、HTTP&#x2F;3、反向代理、负载均衡、静态文件服务等功能。如果你想寻找 Nginx 的替代品或者是小白，那么可以尝试一下 Caddy。</p><h2 id="4-SSH-安全配置"><a href="#4-SSH-安全配置" class="headerlink" title="4. SSH 安全配置"></a>4. SSH 安全配置</h2><h3 id="4-1-修改-SSH-端口"><a href="#4-1-修改-SSH-端口" class="headerlink" title="4.1 修改 SSH 端口"></a>4.1 修改 SSH 端口</h3><blockquote><p>SSH 端口默认是 22，如果看过 SSH 登陆日志 你应该会发现，你的 SSH 每天都会被 <strong>来自全球各地的大量的暴力破解</strong> 密码尝试。这些攻击者会尝试使用常见的用户名和密码来登录你的服务器，如果你的密码不够复杂，那么你的服务器很有可能会被攻破。改变 SSH 端口理论上可以减少九成九以上的暴力破解尝试。</p></blockquote><p>所以，修改服务器的 SSH 端口是非常有必要的。<br>我们可以将 SSH 端口修改为一个不常用的端口来避免被直接爆破，比如 2222。</p><p>在服务器上编辑 SSH 配置文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo vim /etc/ssh/sshd_config<br></code></pre></td></tr></table></figure><p>找到 <code>Port 22</code> 这一行，将 22 改为 2222。<br>如果有注释符号 <code>#</code>，将其删除。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">Port 2222<br></code></pre></td></tr></table></figure><p>保存并退出配置文件。</p><p>然后重启 SSH 服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemctl restart sshd<br></code></pre></td></tr></table></figure><p>现在你就可以使用新的端口来连接服务器了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh root@&lt;服务器 IP 地址&gt; -p 2222<br></code></pre></td></tr></table></figure><h3 id="4-2-改用-SSH-密钥登录"><a href="#4-2-改用-SSH-密钥登录" class="headerlink" title="4.2 改用 SSH 密钥登录"></a>4.2 改用 SSH 密钥登录</h3><p>SSH 密钥登录是一种更加安全的登录方式，它不需要输入密码，而是通过密钥对来进行验证。这样就可以避免密码被暴力破解。</p><p>SSH 密钥加密原理是使用非对称加密算法，原理如下<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://help.aliyun.com/zh/ecs/ssh-service-introduction">[1]</span></a></sup>：<br><img src="https://pic2.zhimg.com/80/v2-8e97a3e00c822f160241ba31cc8f8579_1440w.webp" srcset="/img/loading.gif" lazyload alt="非对称加密算法"></p><p>密钥对分为公钥和私钥，公钥存放在服务器上，私钥存放在本地。当我们使用 SSH 密钥登录时，本地的私钥会与服务器上的公钥进行匹配，如果匹配成功，就可以登录到服务器。</p><h4 id="4-2-1-生成-SSH-密钥对"><a href="#4-2-1-生成-SSH-密钥对" class="headerlink" title="4.2.1 生成 SSH 密钥对"></a>4.2.1 生成 SSH 密钥对</h4><p>在本地终端输入以下命令，粘贴以下文本，将示例中使用的电子邮件替换为你的电子邮件地址。：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh-keygen -t ed25519 -C <span class="hljs-string">&quot;your_email@example.com&quot;</span><br></code></pre></td></tr></table></figure><p>系统会提示你输入一个文件名，这个文件名是用来保存你的密钥对的，可以按 Enter 键接受默认文件位置。如果你已经有了 SSH 密钥对，可以选择覆盖或者使用新的文件名。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">Generating public/private ed25519 key pair.<br>Enter file <span class="hljs-keyword">in</span> <span class="hljs-built_in">which</span> to save the key (/home/user/.ssh/id_ed25519):<br></code></pre></td></tr></table></figure><p>然后系统会提示你输入一个密码，这个密码是用来保护你的私钥的，如果你不想输入密码，可以直接按 Enter 键跳过。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">Enter passphrase (empty <span class="hljs-keyword">for</span> no passphrase): <br>Enter same passphrase again:<br></code></pre></td></tr></table></figure><p>现在你已经生成了 SSH 密钥对，你可以在 <code>~/.ssh</code> 目录或者你指定的目录下找到你的密钥对。</p><h4 id="4-2-2-将公钥添加到服务器"><a href="#4-2-2-将公钥添加到服务器" class="headerlink" title="4.2.2 将公钥添加到服务器"></a>4.2.2 将公钥添加到服务器</h4><p>现在你需要将你的公钥添加到服务器上，这样你就可以使用私钥登录服务器了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh-copy-id -i ~/.ssh/id_ed25519.pub -p 2222 root@&lt;服务器 IP 地址&gt;<br></code></pre></td></tr></table></figure><p>注意，这里的<br><code>-i</code> 参数是用来指定你的公钥文件的，如果你的公钥文件名不是 <code>id_ed25519.pub</code>，那么你需要将其替换为你的公钥文件名。<br><code>-p 2222</code> 是用来指定 SSH 端口的，如果你的 SSH 端口不是 2222，那么你需要将其替换为你的 SSH 端口。</p><p>如果没有报错，那么你的公钥已经成功添加到服务器上了。</p><h4 id="4-2-3-修改服务器-SSH-配置文件"><a href="#4-2-3-修改服务器-SSH-配置文件" class="headerlink" title="4.2.3 修改服务器 SSH 配置文件"></a>4.2.3 修改服务器 SSH 配置文件</h4><p>现在你需要修改服务器的 SSH 配置文件，使得服务器可以使用密钥对登录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo vim /etc/ssh/sshd_config<br></code></pre></td></tr></table></figure><p>找到 <code>PubkeyAuthentication</code> 这一行，将 <code>no</code> 改为 <code>yes</code> 或取消注释。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">PubkeyAuthentication <span class="hljs-built_in">yes</span><br></code></pre></td></tr></table></figure><p>保存并退出配置文件。</p><p>然后测试一下是否可以使用密钥对登录服务器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh root@&lt;服务器 IP 地址&gt; -p 2222 -i ~/.ssh/id_ed25519<br></code></pre></td></tr></table></figure><p>如果你成功登录到服务器，那么你的密钥对已经登录成功了。</p><p>现在你可以禁用密码登录，使得服务器更加安全：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo vim /etc/ssh/sshd_config<br></code></pre></td></tr></table></figure><p>找到 <code>PasswordAuthentication</code> 这一行，将 <code>yes</code> 改为 <code>no</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">PasswordAuthentication no<br></code></pre></td></tr></table></figure><p>保存并退出配置文件。</p><p>测试一下是否可以使用密码登录服务器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh root@&lt;服务器 IP 地址&gt; -p 2222<br></code></pre></td></tr></table></figure><p>如果你不能登录到服务器，那么你的密码登录已经被禁用了。<br>如果还是可以登录到服务器，那么你需要检查一下你的配置文件是否正确。或者 <code>/etc/ssh/sshd_config.d/*.conf</code> 中是否有其他配置文件覆盖了你的配置。</p><h2 id="5-配置防火墙"><a href="#5-配置防火墙" class="headerlink" title="5. 配置防火墙"></a>5. 配置防火墙</h2><h3 id="5-1-防火墙简介"><a href="#5-1-防火墙简介" class="headerlink" title="5.1 防火墙简介"></a>5.1 防火墙简介</h3><p>防火墙是一种网络安全程序，用于监控和控制网络流量。它可以根据预定义的安全规则来阻止或允许流量通过。防火墙可以保护你的服务器免受来自互联网的恶意攻击。</p><h3 id="5-2-防火墙的选择"><a href="#5-2-防火墙的选择" class="headerlink" title="5.2 防火墙的选择"></a>5.2 防火墙的选择</h3><p>RedHat&#x2F;CentOS 系统可以选择 <code>firewalld</code> 防火墙，而 Debian&#x2F;Ubuntu 系统可以选择 <code>ufw</code> 防火墙。</p><p>本文使用的是 Debian 系统，所以我们可以选择 <code>ufw</code> 防火墙。</p><h3 id="5-3-安装-ufw"><a href="#5-3-安装-ufw" class="headerlink" title="5.3 安装 ufw"></a>5.3 安装 ufw</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt update<br>sudo apt install ufw -y<br></code></pre></td></tr></table></figure><h3 id="5-4-启用-ufw"><a href="#5-4-启用-ufw" class="headerlink" title="5.4 启用 ufw"></a>5.4 启用 ufw</h3><p>注意，在启用 UFW 防火墙之前，你必须显式允许进来的 SSH 连接。SSH 可能是你操作机器的唯一渠道，如果被防火墙拦住，将永远都无法连接到机器上，可能就得重置服务器了。</p><p>输入以下命令放开 SSH 端口：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo ufw allow 2222/tcp<br></code></pre></td></tr></table></figure><p>SSH 默认为 22 端口，如果 SSH 运行在非标准端口，你需要将上述命令中的 2222 端口替换为对应的 SSH 端口。本文为 2222 端口</p><p>你还可以放开其他端口，比如 HTTP 端口 80、HTTPS 端口 443：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo ufw allow 80/tcp<br>sudo ufw allow 443/tcp<br></code></pre></td></tr></table></figure><p>输入以下命令启用 ufw：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo ufw <span class="hljs-built_in">enable</span><br></code></pre></td></tr></table></figure><h2 id="6-服务器禁用-ping"><a href="#6-服务器禁用-ping" class="headerlink" title="6. 服务器禁用 ping"></a>6. 服务器禁用 ping</h2><p>如果你不希望别人通过 ping 来探测你的服务器，可以禁用 ping。实测禁用 ping 以后，服务器就基本没有遭受 SSH 暴力破解的尝试了。</p><p>在 <code>/etc/sysctl.conf</code> 文件中添加以下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">net/ipv4/icmp_echo_ignore_all=1<br></code></pre></td></tr></table></figure><p>然后重新加载配置文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo sysctl -p<br></code></pre></td></tr></table></figure><h2 id="7-配置-Fail2ban"><a href="#7-配置-Fail2ban" class="headerlink" title="7. 配置 Fail2ban"></a>7. 配置 Fail2ban</h2><p>可以参考我的文章：<a href="/posts/1acd162e/" title="Fail2ban 安装使用教程">Fail2ban 安装使用教程</a></p><p>Fail2Ban 是一个入侵检测系统框架，它可以监控服务器的日志文件，当发现有暴力破解行为时，会自动封禁攻击者的 IP 地址。可以保护电脑服务器免受暴力破解。它用 Python 编写。能够在具有本地安装的数据包控制系统或防火墙（如 iptables）接口的 POSIX 系统上运行。</p><h2 id="8-一键脚本"><a href="#8-一键脚本" class="headerlink" title="8. 一键脚本"></a>8. 一键脚本</h2><p>本文所讲述的内容我整理成了一键脚本，可以帮助你快速部署服务器，包括设置时区、安装 Web 服务器、SSH 安全配置、防火墙配置、禁用 ping、配置 Fail2ban 等等。 <strong><code>在使用前请最好先阅读脚本内容，以免造成不必要的损失</code></strong> 你可以根据自己的需求修改脚本内容。目前支持 Debian 12, Ubuntu 22.04</p><p>脚本开源地址：<a target="_blank" rel="noopener" href="https://github.com/mobeicanyue/init-server">https://github.com/mobeicanyue/init-server</a></p><p>使用方法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://raw.githubusercontent.com/mobeicanyue/init-server/main/init-server.sh<br>sudo bash init-server.sh<br></code></pre></td></tr></table></figure><p>如果你的服务器无法访问 GitHub，可以使用 jsDelivr 加速访问：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://cdn.jsdelivr.net/gh/mobeicanyue/init-server/init-server.sh<br>sudo bash init-server.sh<br></code></pre></td></tr></table></figure><p><br><br></p><p>本文如有错误或者不足之处，欢迎指正。</p><p><br><br></p><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/ecs/ssh-service-introduction">https://help.aliyun.com/zh/ecs/ssh-service-introduction</a> <a href="#fnref:1" rev="footnote" class="footnote-backref">↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://wiki.debian.org/DateTime">https://wiki.debian.org/DateTime</a> <a href="#fnref:2" rev="footnote" class="footnote-backref">↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://phoenixnap.com/kb/debian-time-sync">https://phoenixnap.com/kb/debian-time-sync</a> <a href="#fnref:3" rev="footnote" class="footnote-backref">↩</a></span></span></li></ol></div></section></div><hr><div><div class="post-metas my-3"><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/%E8%BF%90%E7%BB%B4/" class="print-no-link">#运维</a> <a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="print-no-link">#服务器</a> <a href="/tags/%E9%83%A8%E7%BD%B2/" class="print-no-link">#部署</a> <a href="/tags/Fail2ban/" class="print-no-link">#Fail2ban</a> <a href="/tags/%E5%AE%89%E5%85%A8/" class="print-no-link">#安全</a> <a href="/tags/Linux/" class="print-no-link">#Linux</a> <a href="/tags/SSH/" class="print-no-link">#SSH</a> <a href="/tags/ufw/" class="print-no-link">#ufw</a></div></div><div class="license-box my-3"><div class="license-title"><div>从零开始部署服务器和网站</div><div>https://blog.ovvv.top/posts/4cde56ee/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>mobeicanyue</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2024年3月1日 22:25</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2024年5月20日 16:47</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/posts/6645bed3/" title="Nginx 安装与使用教程"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Nginx 安装与使用教程</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/posts/d2adab3b/" title="在 ArchLinux 上安装使用 PostgreSQL"><span class="hidden-mobile">在 ArchLinux 上安装使用 PostgreSQL</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="giscus" class="giscus"></div><script>Fluid.utils.loadComments("#giscus",(function(){var t={repo:"mobeicanyue/blog-comment","repo-id":"R_kgDOLnLyGw",category:"Announcements","category-id":"DIC_kwDOLnLyG84CeUpm","theme-light":"light","theme-dark":"dark",mapping:"pathname","reactions-enabled":1,"emit-metadata":1,"input-position":"top",lang:"zh-CN"},e={};for(let n in t){if(!n.startsWith("theme-"))e[n.startsWith("data-")?n:"data-"+n]=t[n]}var n="light",a="dark";window.GiscusThemeLight=n,window.GiscusThemeDark=a,e["data-theme"]="dark"===document.documentElement.getAttribute("data-user-color-scheme")?a:n;for(let t in e){var i=e[t];null!=i&&""!==i||delete e[t]}var o=document.createElement("script");o.setAttribute("src","https://giscus.app/client.js"),o.setAttribute("crossorigin","anonymous");for(let t in e)o.setAttribute(t,e[t]);var r=document.getElementsByTagName("script"),s=r.length>0?r[r.length-1]:document.head||document.documentElement;s.parentNode.insertBefore(o,s.nextSibling)}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a><div>© 2023<span id="copyrightYear"></span> | <a href="https://github.com/mobeicanyue" target="_blank" rel="nofollow noopener"><span>mobeicanyue</span></a></div><div><span id="timeYear">载入年份...</span> <span id="timeDate">载入天数...</span> <span id="times">载入时分...</span></div><script async src="/js/duration.js"></script><script async src="/js/random.js"></script></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>